<div class="container-fluid" style="margin-top: 10%;" style="background-color: rgb(253, 251, 251);">
  <hr>

  <div style="margin: 2%;min-height: 500px;">
    <mat-tab-group>
      <mat-tab label="Orders" class="container-fluid">

        <h1 style="text-align: center;font-weight: bold;">My Orders </h1>
        <div *ngIf="allOrders.length == 0" style="text-align: center;padding: 10%;min-height: 300px;">
          <p>No Orders</p>
        </div>
        <div *ngIf="deviceLg && allOrders.length !== 0 || deviceMd && allOrders.length !== 0">

          <div class="row" style="margin:1%">

            <div class="col-xs-2">
              <p style="font-size: large;">Order Date</p>
            </div>
            <div class="col-xs-2">
              <p style="font-size: large;">Order Total</p>

            </div>
            <div class="col-xs-2">
              <p style="font-size: large;">Order Status</p>

            </div>

          </div>
<div class="cartHeight">
          <div *ngFor="let item of allOrders">
            <div class="row" style="border:1px;border-style: groove;margin:1%;padding-top: 3px;">


              <div class="col-xs-2">

                <p>{{item.date}}</p>
              </div>
              <div class="col-xs-2">

                <p>{{item?.total}}</p>
              </div>

              <div class="col-xs-2">

                <p>{{item?.phase}}</p>
              </div>


                <div class="col-xs-2">
                  <a class="btn btn-primary" style="color: white;" data-toggle="collapse" href="#{{item._id}}"
                    role="button" aria-expanded="false" aria-controls="{{item._id}}">
                    Details
                  </a>


                </div>
                <div class="col-xs-2"  *ngIf="item.phase !== 'canceled'">
                  <a class="btn btn-primary" style="color: white;" data-toggle="collapse" href="#{{item.total}}"
                    role="button" aria-expanded="false" aria-controls="{{item.total}}">
                    Status
                  </a>
                </div>
                <div class="col-xs-2" *ngIf="item.phase == 'canceled'">
               <p>Order is Canceled</p>
              </div>
                <div class="col-xs-2">
                  <a class="btn btn-danger" (click)="orderCancel(item._id)"
                    role="button" aria-expanded="false" aria-controls="{{item.total}}">
                    Cancel Order
                  </a>
                </div>
              </div>

            <div class="collapse container-fluid" id="{{item.total}}"
              style="padding-top: 1%;margin-left: 1%;margin-right: 1%;">
              <div style="min-height: 100px;padding: 5%;">
                <div class="row multi-steps-wrap">
                  <ul class="list-unstyled multi-steps">
                    <li class="job-status" [ngClass]="item.status === 'processing' ? 'job-created' : ''">processing</li>
                    <li class="job-status is-active negative" [ngClass]="item.status === 'packed' ? 'job-packed' : ''">
                      Packed</li>
                    <li class="job-status" [ngClass]="item.status === 'shipped' ? 'job-completed' : ''">Shipped</li>
                    <li class="job-status" [ngClass]="item.status === 'delivered' ? 'job-closed' : ''">Delivered</li>

                  </ul>
                </div>
              </div>
            </div>


            <div class="collapse" id="{{item._id}}" style="padding-top: 1%;margin-left: 1%;margin-right: 1%;">
              <div class="row">

                <div class="col-xs-12">

                  <div
                    style="padding-left: 2%;padding-top: 1%;display: flex;flex-direction: row;justify-content: space-between;background-color: rgb(230, 230, 230);padding-left: 5%;">
                    <p>Total Amount </p>
                    <p class="col-xs-2">{{item.total}}</p>


                  </div>
                  <div *ngFor="let item of item.cartData">

                    <div class="row">
                      <div class="col-2"></div>

                      <div class="col-2">
                        <div class="container" style="height: 100px; width: 120px">
                          <div >
                            <img class="image"  style="width: 120px; height: 100px;" [src]="getImage(item.productImage)" />
                          </div>

                        </div>
                      </div>
                      <div class="col-2">
                        <div>
                          <p>{{item.details}}</p>
                        </div>
                        <div>
                          <div style="font-size: small;"> Unit price {{item.price}}</div>
                          <div style="font-size: small;">Total Units {{item.productCount}}</div>
                        </div>
                      </div>
                      <div class="col-2" style="padding-top: 5%;">
                        <span style="font-weight: 500;font-size: small;">total price {{item.unitTotal}}</span>
                      </div>
                      <div class="col-2"></div>
                    </div>
                    <hr>
                  </div>
                </div>

              </div>


            </div>


          </div>
        </div>
        </div>



        <div *ngIf="deviceSm && allOrders.length !== 0 || deviceXs && allOrders.length !== 0">

          <div class="row" style="margin:1%">

            <div class="col-xs-2">
              <p style="font-size: large;">Order Date</p>
            </div>
            <div class="col-xs-2">
              <p style="font-size: large;">Order Total</p>

            </div>
            <div class="col-xs-2">
              <p style="font-size: large;">Order Status</p>

            </div>

          </div>
       <div class="cartHeight">
          <div *ngFor="let item of allOrders">
            <div class="row" style="border:1px;border-style: groove;margin:1%;padding-top: 3px;">


              <div class="col-xs-4">

                <p>{{item.date}}</p>
              </div>
              <div class="col-xs-4">

                <p>{{item?.total}}</p>
              </div>

              <div class="col-xs-4">

                <p>start phase</p>
              </div>

              <div class="row" style="width: 100%;display: flex;flex-direction: row;justify-content: space-between;">

                <div>
                  <a class="btn btn-primary" style="color: white;" data-toggle="collapse" href="#{{item._id}}"
                    role="button" aria-expanded="false" aria-controls="{{item._id}}">
                    Details
                  </a>


                </div>
                <div>
                  <a class="btn btn-primary" style="color: white;" data-toggle="collapse" href="#{{item.total}}"
                    role="button" aria-expanded="false" aria-controls="{{item.total}}">
                    Status
                  </a>
                </div>
              </div>
            </div>

            <div class="collapse container-fluid" id="{{item.total}}"
              style="padding-top: 1%;margin-left: 1%;margin-right: 1%;">
              <div style="min-height: 100px;padding: 5%;">
                <div class="row multi-steps-wrap">
                  <ul class="list-unstyled multi-steps">
                    <li class="job-status" [ngClass]="item.status === 'processing' ? 'job-created' : ''">processing</li>
                    <li class="job-status is-active negative" [ngClass]="item.status === 'packed' ? 'job-packed' : ''">
                      Packed</li>
                    <li class="job-status" [ngClass]="item.status === 'shipped' ? 'job-completed' : ''">Shipped</li>
                    <li class="job-status" [ngClass]="item.status === 'delivered' ? 'job-closed' : ''">Delivered</li>

                  </ul>
                </div>
              </div>
            </div>


            <div class="collapse" id="{{item._id}}" style="padding-top: 1%;margin-left: 1%;margin-right: 1%;">
              <div class="row">

                <div class="col-xs-12">

                  <div
                    style="padding-left: 2%;padding-top: 1%;display: flex;flex-direction: row;justify-content: space-between;background-color: rgb(230, 230, 230);padding-left: 5%;">
                    <p>Total Amount </p>
                    <p class="col-xs-2">{{item.total}}</p>


                  </div>
                  <div *ngFor="let item of item.cartData">

                    <div style="padding-top: 4%;display: flex;flex-direction: row;justify-content: space-between;">
                      <div class="col-xs-4">
                        <div style="height: 50px;width: 100px;">
                          <img [src]='getImage(item.productImage)' style="height: 50px;width: 100px;">
                        </div>
                      </div>
                      <div class="col-xs-4">
                        <div>
                          <p>{{item.details}}</p>
                        </div>
                        <div>
                          <span style="font-size: small;"> Unit price {{item.price}}</span>
                          <span style="font-size: small;">Total Units {{item.productCount}}</span>
                        </div>
                      </div>
                      <div class="col-xs-4" style="padding-top: 5%;">
                        <span style="font-weight: 500;font-size: small;">total price {{item.unitTotal}}</span>
                      </div>
                    </div>
                    <hr>
                  </div>
                </div>

              </div>


            </div>


          </div>
        </div>
        </div>
      </mat-tab>
      <mat-tab label="Canceled Orders">

        <div *ngIf="canceledOrders.length == 0" style="text-align: center;padding: 10%;min-height: 300px;">
          <p>No Canceled Orders</p>
        </div>

         <div *ngIf="deviceLg && canceledOrders.length !== 0 || deviceMd && canceledOrders.length !== 0">

          <div class="row" style="margin:1%">

            <div class="col-xs-2">
              <p style="font-size: large;">Order Date</p>
            </div>
            <div class="col-xs-2">
              <p style="font-size: large;">Order Total</p>

            </div>
            <div class="col-xs-2">
              <p style="font-size: large;">Order Status</p>

            </div>

          </div>

          <div *ngFor="let item of canceledOrders">
            <div class="row" style="border:1px;border-style: groove;margin:1%;padding-top: 3px;">


              <div class="col-xs-4">

                <p>{{item.date}}</p>
              </div>
              <div class="col-xs-4">

                <p>{{item?.total}}</p>
              </div>

              <div class="col-xs-4">

                <p>start phase</p>
              </div>

              <div class="row" style="width: 100%;display: flex;flex-direction: row;justify-content: space-between;">

                <div>
                  <a class="btn btn-primary" style="color: white;" data-toggle="collapse" href="#{{item._id}}"
                    role="button" aria-expanded="false" aria-controls="{{item._id}}">
                    Details
                  </a>


                </div>
                <div>
                  <a class="btn btn-primary" style="color: white;" data-toggle="collapse" href="#{{item.total}}"
                    role="button" aria-expanded="false" aria-controls="{{item.total}}">
                    Status
                  </a>
                </div>
              </div>
            </div>

            <div class="collapse container-fluid" id="{{item.total}}"
              style="padding-top: 1%;margin-left: 1%;margin-right: 1%;">
              <div style="min-height: 100px;padding: 5%;">
                <div class="row multi-steps-wrap">
                  <ul class="list-unstyled multi-steps">
                    <li class="job-status" [ngClass]="item.status === 'processing' ? 'job-created' : ''">processing</li>
                    <li class="job-status is-active negative" [ngClass]="item.status === 'packed' ? 'job-packed' : ''">
                      Packed</li>
                    <li class="job-status" [ngClass]="item.status === 'shipped' ? 'job-completed' : ''">Shipped</li>
                    <li class="job-status" [ngClass]="item.status === 'delivered' ? 'job-closed' : ''">Delivered</li>

                  </ul>
                </div>
              </div>
            </div>


            <div class="collapse" id="{{item._id}}" style="padding-top: 1%;margin-left: 1%;margin-right: 1%;">
              <div class="row">

                <div class="col-xs-12">

                  <div
                    style="padding-left: 2%;padding-top: 1%;display: flex;flex-direction: row;justify-content: space-between;background-color: rgb(230, 230, 230);padding-left: 5%;">
                    <p>Total Amount </p>
                    <p class="col-xs-2">{{item.total}}</p>


                  </div>
                  <div *ngFor="let item of item.cartData">

                    <div style="padding-top: 4%;display: flex;flex-direction: row;justify-content: space-between;">
                      <div class="col-xs-4">
                        <div style="height: 50px;width: 100px;">
                          <img [src]='getImage(item.productImage)' style="height: 50px;width: 100px;">
                        </div>
                      </div>
                      <div class="col-xs-4">
                        <div>
                          <p>{{item.details}}</p>
                        </div>
                        <div>
                          <span style="font-size: small;"> Unit price {{item.price}}</span>
                          <span style="font-size: small;">Total Units {{item.productCount}}</span>
                        </div>
                      </div>
                      <div class="col-xs-4" style="padding-top: 5%;">
                        <span style="font-weight: 500;font-size: small;">total price {{item.unitTotal}}</span>
                      </div>
                    </div>
                    <hr>
                  </div>
                </div>

              </div>


            </div>


          </div>

        </div>

         <div *ngIf="deviceXs || deviceSm">
          <div class="row" style="margin:1%">

            <div class="col-xs-4">
              <p style="font-size: large;">Order Date</p>
            </div>
            <div class="col-xs-4">
              <p style="font-size: large;">Order Total</p>

            </div>
            <div class="col-xs-4">
              <p style="font-size: large;">Order Status</p>

            </div>

          </div>
          <div *ngFor="let item of canceledOrders">
            <div class="row" style="border:1px;border-style: groove;margin:1%;padding-top: 3px;">


              <div class="col-xs-4">

                <p>{{item.date}}</p>
              </div>
              <div class="col-xs-4">

                <p>{{item?.total}}</p>
              </div>

              <div class="col-xs-4">

                <p>start phase</p>
              </div>

              <div class="row" style="width: 100%;display: flex;flex-direction: row;justify-content: space-between;">

                <div>
                  <a class="btn btn-primary" style="color: white;" data-toggle="collapse" href="#{{item._id}}"
                    role="button" aria-expanded="false" aria-controls="{{item._id}}">
                    Details
                  </a>


                </div>
                <div>
                  <a class="btn btn-primary" style="color: white;" data-toggle="collapse" href="#{{item.total}}"
                    role="button" aria-expanded="false" aria-controls="{{item.total}}">
                    Status
                  </a>
                </div>
              </div>
            </div>

            <div class="collapse container-fluid" id="{{item.total}}"
              style="padding-top: 1%;margin-left: 1%;margin-right: 1%;">
              <div style="min-height: 100px;padding: 5%;">
                <div class="row multi-steps-wrap">
                  <ul class="list-unstyled multi-steps">
                    <li class="job-status" [ngClass]="item.status === 'processing' ? 'job-created' : ''">processing</li>
                    <li class="job-status is-active negative" [ngClass]="item.status === 'packed' ? 'job-packed' : ''">
                      Packed</li>
                    <li class="job-status" [ngClass]="item.status === 'shipped' ? 'job-completed' : ''">Shipped</li>
                    <li class="job-status" [ngClass]="item.status === 'delivered' ? 'job-closed' : ''">Delivered</li>

                  </ul>
                </div>
              </div>
            </div>


            <div class="collapse" id="{{item._id}}" style="padding-top: 1%;margin-left: 1%;margin-right: 1%;">
              <div class="row">

                <div class="col-xs-12">

                  <div
                    style="padding-left: 2%;padding-top: 1%;display: flex;flex-direction: row;justify-content: space-between;background-color: rgb(230, 230, 230);padding-left: 5%;">
                    <p>Total Amount </p>
                    <p class="col-xs-2">{{item.total}}</p>


                  </div>
                  <div *ngFor="let item of item.cartData">

                    <div style="padding-top: 4%;display: flex;flex-direction: row;justify-content: space-between;">
                      <div class="col-xs-4">
                        <div style="height: 50px;width: 100px;">
                          <img [src]='getImage(item.productImage)' style="height: 50px;width: 100px;">
                        </div>
                      </div>
                      <div class="col-xs-4">
                        <div>
                          <p>{{item.details}}</p>
                        </div>
                        <div>
                          <span style="font-size: small;"> Unit price {{item.price}}</span>
                          <span style="font-size: small;">Total Units {{item.productCount}}</span>
                        </div>
                      </div>
                      <div class="col-xs-4" style="padding-top: 5%;">
                        <span style="font-weight: 500;font-size: small;">total price {{item.unitTotal}}</span>
                      </div>
                    </div>
                    <hr>
                  </div>
                </div>

              </div>


            </div>


          </div>

        </div>


      </mat-tab>

    </mat-tab-group>
  </div>









  <div id="accordion">
    <div class="row">
      <div class="col-md-12">
        <div class="panel-group" *ngFor="let item of allOrders" id="accordion" role="tablist" aria-multiselectable="true">
          <div class="panel panel-default"></div>
            <div class="panel-heading" role="tab" id="headingOne">
              <h4 class="panel-title">
                <a role="button" data-toggle="collapse" data-parent="#accordion" href="#{{item._id}}"
                  aria-expanded="true" aria-controls="{{item._id}}">

         <!-- select -->

                  <div class="row" style="border:1px;border-style: groove;margin:1%;padding-top: 3px;">


                    <div class="col-xs-4">

                      <p>{{item.date}}</p>
                    </div>
                    <div class="col-xs-4">

                      <p>{{item?.total}}</p>
                    </div>

                    <div class="col-xs-4">

                      <p>start phase</p>
                    </div>

                    <div class="row" style="width: 100%;display: flex;flex-direction: row;justify-content: space-between;">


                      <div>
                        <a class="btn btn-primary" style="color: white;" data-toggle="collapsedetail" href="#{{item.total}}"
                          role="button" aria-expanded="false" aria-controls="{{item._id}}">
                          Details
                        </a>


                      </div>
                      <div>
                        <a class="btn btn-primary" style="color: white;" data-toggle="collapse" href="#{{item._id}}"
                          role="button" aria-expanded="false" aria-controls="{{item.total}}">
                          Status
                        </a>
                      </div></div>
                  </div>
      <!-- select -->
                </a>
              </h4>
            </div>
            <div id="{{item._id}}" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingOne">
              <div class="panel-body">


           <!-- status -->
                <div class="collapse container-fluid"

                style="padding-top: 1%;margin-left: 1%;margin-right: 1%;">
                <div style="min-height: 300px;padding: 5%;">
                  <div class="row multi-steps-wrap">
                    <ul class="list-unstyled multi-steps">

                      <li class="job-status" [ngClass]="
                      ((item?.phase === 'processing') ||
                      (item?.phase === 'packed') ||
                      (item?.phase === 'shipped')) ? '' : 'negative'">
                        processing</li>
                      <li class="job-status" [ngClass]="((item?.phase === 'packed') ||
                        (item?.phase === 'shipped') ||
                        (item?.phase === 'delievry phase')) ? '' : 'negative'">
                        Packed</li>
                      <li class="job-status " [ngClass]="((item?.phase === 'shipped')
                        || (item?.phase === 'delievry phase')) ? '' : 'negative'">
                        Shipped</li>
                      <li class="job-status" [ngClass]="item?.phase === 'delievry phase' ? '' : 'negative'">
                        Delivered</li>
                    </ul>
                  </div>
                </div>
              </div>
  <!-- detials -->
              <div class="collapse" id="{{item.total}}" style="padding-top: 1%;margin-left: 1%;margin-right: 1%;">
                <div class="row">

                  <div class="col-xs-12">

                    <div
                      style="padding-left: 2%;padding-top: 1%;display: flex;flex-direction: row;justify-content: space-between;background-color: rgb(230, 230, 230);padding-left: 5%;">
                      <p>Total Amount </p>
                      <p class="col-xs-2">{{item.total}}</p>


                    </div>
                    <div *ngFor="let item of item.cartData">

                      <div style="padding-top: 4%;display: flex;flex-direction: row;justify-content: space-between;">
                        <div class="col-xs-4">
                          <div style="height: 50px;width: 100px;">
                            <img [src]='getImage(item.productImage)' style="height: 50px;width: 100px;">
                          </div>
                        </div>
                        <div class="col-xs-4">
                          <div>
                            <p>{{item.details}}</p>
                          </div>
                          <div>
                            <span style="font-size: small;"> Unit price {{item.price}}</span>
                            <span style="font-size: small;">Total Units {{item.productCount}}</span>
                          </div>
                        </div>
                        <div class="col-xs-4" style="padding-top: 5%;">
                          <span style="font-weight: 500;font-size: small;">total price {{item.unitTotal}}</span>
                        </div>
                      </div>
                      <hr>
                    </div>
                  </div>

                </div>


              </div>


            </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>
